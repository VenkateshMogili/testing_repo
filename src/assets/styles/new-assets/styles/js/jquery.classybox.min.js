/*!
 * jQuery ClassyBox
 * www.class.pm
 *
 * Written by Marius Stanciu - Sergiu <marius@class.pm>
 * Licensed under the MIT license www.class.pm/LICENSE-MIT
 * Version 1.3.0
 *
 */(function(d){function z(a){d("body").append('<div id="classybox"></div><div class="classybox-loader"></div><section class="classybox-wrap"><h2 class="hide">ClassyBox Media Browser</h2><div class="content"><div class="close"><a href="#">close</a></div><div class="panel"></div><div class="next"><a href="#">next</a></div><div class="prev"><a href="#">previous</a></div></div></section>');k=d("#classybox");l=d(".classybox-loader");f=d(".classybox-wrap");c=d(".classybox-wrap").find(".content");A=d(".classybox-wrap").find(".close"); Panel=d(".classybox-wrap").find(".panel");n=d(".classybox-wrap").find(".next");p=d(".classybox-wrap").find(".prev");f.contents().hide();f.hide();a.navigation&&(u(a),p.unbind().bind("click",function(){E(a);return!1}),n.unbind().bind("click",function(){F(a);return!1}));k.fadeIn(a.speed/1.5);v=0==d(document).scrollTop()?h[0]-a.height/2:d(document).scrollTop()+h[0]-a.height/2;f.css({top:v+h[0]/1.6,left:h[1]});l.css({top:v+h[0]/2+l.height()/1.5,left:h[1]}).hide();f.fadeIn(500,function(){q(a,a.height,a.width, 0);w(a)});d(window).resize(function(){q(a,r,s,0,1)});A.click(function(){B(a);return!1});a.closeAnywhere&&k.click(function(){B(a)})}function w(a){var b=a.arrayEl[a.arrayActEl][0];if(0<b.indexOf("jpg",".")||0<b.indexOf("png",".")||0<b.indexOf("gif",".")){c.append('<div class="image"><img /></div>');l.fadeIn(200);f.find(".image img").hide();var g=new Image;g.onload=function(){f.find(".image img").attr("src",g.src);r=g.height;s=g.width;q(a,g.height,g.width);g.onload=function(){};l.fadeOut(400)};g.src= b;var e=a.arrayEl[a.arrayActEl][2],m=a.arrayEl[a.arrayActEl][1];m&&(f.find(".image").append("<div class='text'><h1>"+m+"</h1></div>"),f.hover(function(){d(this).find(".text").stop(!0,!0).delay(200).slideDown(200)},function(){d(this).find(".text").stop(!0,!0).delay(200).slideUp(180)}));e&&f.find(".text").append("<div class='description'>"+e+"</div>")}else c.fadeIn(a.speed/1.5),r=a.height,s=a.width;if(0<b.indexOf("mp3",".")||0<b.indexOf("vmw",".")||0<b.indexOf("avi",".")||0<b.indexOf("mp4","."))c.append("<div class='object'><div id='classybox-player'></div></div>"), jwplayer("classybox-player").setup({file:b,width:a.width,height:a.height});0<b.indexOf("youtube",".")&&(c.append("<div class='object'></div>"),hrefY="http://www.youtube.com/embed/"+b.substring(31,42),f.find(".object").append("<iframe class='' type='text/html' width='"+a.width+"' height='"+a.height+"' src='"+hrefY+"' frameborder='0'></iframe>"));0<b.indexOf("vimeo",".")&&(c.append("<div class='object'></div>"),hrefV=b.substr(-8),f.find(".object").append("<iframe src='http://player.vimeo.com/video/"+ hrefV+"?title=0&amp;byline=0&amp;portrait=0' width='"+a.width+"' height='"+a.height+"' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>"));a.iframe&&c.append("<iframe src='"+b+"' scrolling='auto' height='"+a.height+"' width='"+a.width+"' frameborder='0'></iframe>");a.inline&&c.append(d(b).html());(!1!==a.ajax||0<b.indexOf("txt",".")||0<b.indexOf("js","."))&&d.ajax({type:a.ajaxType?a.ajaxType:"GET",url:b,data:a.ajaxData,success:a.ajaxSuccess?a.ajaxSuccess:function(a){c.append(a)}}); 0<b.indexOf("dailymotion",".")&&(e=b.substring(33,39),c.append("<iframe frameborder='0' width='"+a.width+"' height='"+a.height+"' src='http://www.dailymotion.com/embed/video/"+e+"'></iframe>"));0<b.indexOf("5min",".")&&(e=b.substr(-9),c.append("<object width='"+a.width+"' height='"+a.height+"' id='FiveminPlayer' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'><param name='allowfullscreen' value='true'/><param name='allowScriptAccess' value='always'/><param name='movie' value='http://embed.5min.com/"+ e+"/'/><param name='wmode' value='opaque' /><embed name='FiveminPlayer' src='http://embed.5min.com/"+e+"/' type='application/x-shockwave-flash' width='"+a.width+"' height='"+a.height+"' allowfullscreen='true' allowScriptAccess='always' wmode='opaque'></embed></object>"));0<b.indexOf("metacafe",".")&&(e=b.substr(30).slice(0,-1),c.append("<embed flashVars='playerVars=autoPlay=no' src='http://www.metacafe.com/fplayer/"+e+".swf' width='"+a.width+"' height='"+a.height+"' wmode='transparent' allowFullScreen='true' allowScriptAccess='always' name='Metacafe_"+ e.substring(0,7)+"' pluginspage='http://www.macromedia.com/go/getflashplayer' type='application/x-shockwave-flash'></embed>"));0<b.indexOf("ustream",".")&&(e=b.substring(31,39),c.append("<iframe frameborder='0' width='"+a.width+"' height='"+a.height+"' src='http://www.ustream.tv/embed/recorded/"+e+"' style='border: 0px none transparent;'></iframe>"));0<b.indexOf("hell",".")&&(e=b.substring(28,33),c.append("<iframe width='"+a.width+"' height='"+a.height+"' src='http://www.hell.tv/embed/video/"+e+"' frameborder='0' scrolling='no' allowfullscreen></iframe>")); 0<b.indexOf("vevo",".")&&(e=b.substr(-12),c.append("<object width='"+a.width+"' height='"+a.height+"'><param name='movie' value='http://videoplayer.vevo.com/embed/Embedded?videoId="+e+"&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded&env=0&cultureName=en-US&cultureIsRTL=False'></param><param name='wmode' value='transparent'></param><param name='bgcolor' value='#000000'></param><param name='allowFullScreen' value='true'></param><param name='allowScriptAccess' value='always'></param><embed src='http://videoplayer.vevo.com/embed/Embedded?videoId="+ e+"&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961 &playerType=embedded&env=0&cultureName=en-US&cultureIsRTL=False' type='application/x-shockwave-flash' allowfullscreen='true' allowscriptaccess='always' width='"+a.width+"' height='"+a.height+"' bgcolor='#000000' wmode='transparent'></embed></object>"));0<b.indexOf("myspace",".")&&(e=b.substr(-9),c.append("<object width='"+a.width+"' height='"+a.height+"'><param name='allowFullScreen' value='true'/><param name='wmode' value='transparent'/><param name='movie' value='http://mediaservices.myspace.com/services/media/embed.aspx/m="+ e+",t=1,mt=video'/><embed src='http://mediaservices.myspace.com/services/media/embed.aspx/m="+e+",t=1,mt=video' width='"+a.width+"' height='"+a.height+" allowFullScreen='true' type='application/x-shockwave-flash' wmode='transparent'></embed></object>"));a.social&&Panel.append("<div class='fb'><a href='"+("http://www.facebook.com/share.php?u="+window.location+"?cbox="+b)+"' target='_blank'>Facebook</a></div><div class='tw'><a href='"+("https://twitter.com/share?url="+window.location+"?cbox="+b)+"' target='_blank'>Twitter</a></div><div class='gp'><a href='"+ ("https://plus.google.com/share?url="+window.location+"?cbox="+b)+"' target='_blank'>Google plus</a></div>")}function u(a){0!=a.arrayActEl?p.css("top",a.height/2).show():p.hide();a.arrayActEl!=a.arrayEl.length-1?n.css("top",a.height/2).show():n.hide();x(a)}function E(a){0!=a.arrayActEl&&(a.arrayActEl-=1,f.animate({left:"+="+a.width/1.5,opacity:0},a.speed/1.4,function(){c.contents().not(".next, .prev, .close, .panel").remove();Panel.contents().remove();f.animate({left:"-="+2.5*a.width,opacity:0},1).animate({opacity:1}, a.speed/1.5);c.find(".image").length||f.animate({left:h[1]-a.width/2},a.speed/1.5);x(a);w(a);u(a)}))}function F(a){a.arrayActEl!=a.arrayEl.length-1&&(a.arrayActEl+=1,f.animate({left:"-="+a.width/1.5,opacity:0},a.speed/1.4,function(){c.contents().not(".next, .prev, .close, .panel").remove();Panel.contents().remove();f.animate({left:"+="+2.5*a.width,opacity:0},1).animate({opacity:1},a.speed/1.5);c.find(".image").length||f.animate({left:h[1]-a.width/2},a.speed/1.5);x(a);w(a);u(a)}))}function x(a){a.numberEl&& (d(".classybox-wrap .content .number").remove(),0!=a.arrayEl.length&&c.append('<div class="number">'+(a.arrayActEl+1)+" / "+a.arrayEl.length+"</div>"))}function q(a,b,g,e,m){h=y(a);var t=1.6*h[0],k=1.6*h[1],l=0;if(t>b||k>g)a.height=b,a.width=g;else if(a.resize&&(c.find(".resize").remove(),Panel.prepend('<div class="resize"><a href="#">Resize</a></div>'),C=c.find(".resize"),C.find("a").click(function(){q(a,r,s,1);return!1})),a.img&&!e||!e)b>t&&(l=t/b,a.height=b=t,a.width=g*=l),g>k&&(a.height=b*=k/ g,a.width=g=k);f.animate({top:d(document).scrollTop()+h[0]-b/2,left:h[1]-g/2,width:g,height:b},m?0:a.speed/1.5,function(){c.find(".image img, iframe, object").height(b).width(g);d(this).find(".image").contents().fadeIn(a.speed,function(){c.fadeIn(a.speed/1.7)})});n.animate({top:b/2},m?0:50);p.animate({top:b/2},m?0:50)}function B(a){arrPageSize=y();a.arrayEl.length=0;a.arrayActEl=0;c.fadeOut(a.speed/1.6,function(){f.animate({left:arrPageSize[1],top:arrPageSize[0],height:20,width:20},a.speed/1.3,function(){f.fadeOut(a.speed/ 1.2,function(){f.contents().remove();f.remove();k.fadeOut(a.speed/1.5,function(){k.remove()})})})})}function y(){var a=[];a[0]=document.documentElement.clientHeight/2;a[1]=document.documentElement.clientWidth/2;return a}function D(a){var b=window.document.URL.toString();if(0<b.indexOf("?")){for(var b=b.split("?")[1].split("&"),g=Array(b.length),e=Array(b.length),d=0,d=0;d<b.length;d++){var c=b[d].split("=");g[d]=c[0];e[d]=""!==c[1]?unescape(c[1]):"No Value"}for(d=0;d<b.length;d++)if(g[d]==a)return e[d]; return!1}}d.fn.ClassyBox=function(a){a=d.extend({speed:400,height:450,width:650,arrayEl:[],arrayActEl:0,autoDetect:!0,img:1,iframe:!1,inline:!1,ajax:!1,ajaxType:0,ajaxData:0,ajaxSuccess:0,title:!0,navigation:!0,numberEl:1,resize:!0,social:!0,closeAnywhere:!0},a);var b=d(this);if(a.autoDetect&&D("cbox")){var c=D("cbox"),c=d('a[href*="'+unescape(c)+'"]');a.arrayEl.push([c.attr("href"),c.attr("title"),c.children("img").attr("alt")]);z(a)}return this.unbind("click").click(function(){if(d(this).is("a")){a.arrayEl.length= 0;a.arrayActEl=0;if(1!=b.length||a.autoDetect)for(var c=0;c<b.length;c++)a.arrayEl.push([b[c].getAttribute("href"),b[c].getAttribute("title"),d(b[c]).children("img").attr("alt")]);else a.arrayEl.push([this.getAttribute("href"),this.getAttribute("title"),d(this).children("img").attr("alt")]);for(;a.arrayEl[a.arrayActEl][0]!=this.getAttribute("href");)a.arrayActEl++;z(a);return!1}})};var k,f,c,A,n,p,l,C,r,s,h=y(),v})(jQuery);